(()=>{"use strict";function e(e,t){e.innerHTML=`\n    <p>City: ${t.name}</p>\n    <p>Temp: ${t.main.temp} &degC</p>\n    <img src="https://openweathermap.org/img/wn/${t.weather[0].icon}@2x.png"/>`}function t(e,t){e.innerHTML=`\n<img src="https://static-maps.yandex.ru/v1?lang=ru_RU&ll=${t.coord.lon},${t.coord.lat}&z=10&size=300,300&apikey=4aad3cf0-c199-47b7-9630-7f1f56a24cbf" />\n`}function n(e){e.innerHTML="";const t=Object.keys(localStorage);for(const n of t){const t=document.createElement("p");t.className="key",t.innerHTML=n,e.prepend(t)}}!function(o){o.innerHTML='\n    <section class="weather">\n        <form action="" method="get">\n          <input type="text" placeholder="weather" />\n          <button id="button">Show</button>\n        </form>\n        <div class="show">\n          <div id="map">\n          </div>\n          <div id="info"></div>\n        </div>\n    </section>\n    <section class="history">\n      <h2 class="title_history">History</h2>\n      <div id="list_history">\n        <p class="key"></p>\n        </div>\n    </section>\n    ';const i=o.querySelector("input"),c=o.querySelector("#button"),r=o.querySelector("#info"),a=o.querySelector("#map"),s=o.querySelector("#list_history");n(s);const l=o.getElementsByClassName("key");c.addEventListener("click",(async o=>{o.preventDefault();const c=i.value,l=await async function(e){const t=`http://api.openweathermap.org/data/2.5/weather?q=${e}&units=metric&APPID=6cb973b96821fbec8a012c668b8f4700`,n=await fetch(t);if(!n.ok)throw new Error("Cannot get data");return n.json()}(c);e(r,l),t(a,l),localStorage.setItem(c,JSON.stringify(l)),n(s)})),s.addEventListener("mousemove",(()=>{[...l].forEach((n=>{n.addEventListener("click",(function(){const o=n.innerHTML,i=JSON.parse(localStorage.getItem(o));e(r,i),t(a,i)}))}))}))}(document.querySelector("main"))})();